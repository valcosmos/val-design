import{j as r}from"./jsx-runtime-vNq4Oc-g.js";import{a as x}from"./chunk-WFFRPTHA-4hQ1D0Dg.js";import{r as n}from"./index-4g5l5LRQ.js";import"./index-LQfS8e6k.js";import"./index-vfHpAnV7.js";import"./index-n_jREWrw.js";import{c as v}from"./index--jIQrVgb.js";import{I as N}from"./input-b-XfYzok.js";import{T as O}from"./transition-pUwUtk3C.js";import{I as J}from"./icon-YfdEylPN.js";import{a as P}from"./axios-G2rPRu76.js";import"./preview-errors-UTk86sAa.js";import"./index-PPLHz8o0.js";import"./v4-yQnnJER4.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./inheritsLoose-9tIPpNWa.js";import"./index-jmm5gWkb.js";import"./index-uJ5N1ZfI.js";import"./index-tvtfaFq4.js";const X=(u,t=300)=>{const[o,l]=n.useState(u);return n.useEffect(()=>{const m=window.setTimeout(()=>{l(u)},t);return()=>{clearTimeout(m)}},[u,t]),o},z=(u,t)=>{n.useEffect(()=>{const o=l=>{!u.current||u.current.contains(l.target)||t(l)};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}},[u,t])},d=u=>{const{fetchSuggestions:t,onSelect:o,value:l,renderOptions:m,..._}=u,[A,C]=n.useState(l||""),[i,a]=n.useState([]),[E,y]=n.useState(!1),[c,h]=n.useState(-1),g=n.useRef(!1),D=n.useRef(null),f=X(A,500),[R,F]=n.useState(!1);z(D,()=>{a([])}),n.useEffect(()=>{if(f&&g.current){const e=t(f);e instanceof Promise?(y(!0),e.then(s=>{a(s),y(!1),s.length>0&&F(!0)})):(a(e),F(!0))}else a([]),F(!1);h(-1)},[f]);const k=e=>{const s=e.target.value.trim();C(s),g.current=!0},S=e=>{C(e.value),a([]),o&&o(e),g.current=!1},B=e=>{e<0&&(e=0),e>=i.length&&(e=i.length-1),h(e)},b=e=>{switch(e.key){case"Enter":i[c]&&S(i[c]);break;case"ArrowUp":B(c-1);break;case"ArrowDown":B(c+1);break;case"Escape":a([]);break}},T=e=>m?m(e):e.value,I=()=>r.jsx(O,{in:R||E,animation:"zoom-in-top",timeout:300,onExited:()=>{a([])},children:r.jsxs("ul",{className:v({"v-suggestion-list":i.length>0||E}),children:[E&&r.jsx("div",{className:"suggstions-loading-icon",children:r.jsx(J,{icon:"spinner",spin:!0})}),i.map((e,s)=>{const j=v("suggestion-item",{"is-active":s===c});return r.jsx("li",{className:j,onClick:()=>S(e),children:T(e)},s)})]})});return r.jsxs("div",{className:"v-auto-complete",ref:D,children:[r.jsx(N,{..._,value:A,onKeyDown:b,onChange:k}),I()]})};try{d.displayName="AutoComplete",d.__docgenInfo={description:`> AutoComplete 输入框自动完成功能，需要输入建议/辅助提示。

### 引入方法

\`\`\`js

import { AutoComplete } from 'val-design'

\`\`\``,displayName:"AutoComplete",props:{fetchSuggestions:{defaultValue:null,description:"",name:"fetchSuggestions",required:!0,type:{name:"(str: string) => DataSourceType<Record<string, unknown>>[] | Promise<DataSourceType<Record<string, unknown>>[]>"}},onSelect:{defaultValue:null,description:"点击选择项的回调",name:"onSelect",required:!1,type:{name:"((item: DataSourceType<Record<string, unknown>>) => void)"}},renderOptions:{defaultValue:null,description:"自定义模板",name:"renderOptions",required:!1,type:{name:"((item: DataSourceType<Record<string, unknown>>) => ReactElement<any, string | JSXElementConstructor<any>>)"}},disabled:{defaultValue:null,description:"是否禁用 Input",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((e: ChangeEvent<HTMLInputElement>) => void)"}},size:{defaultValue:null,description:"设置 input 大小，支持 lg 或者是 sm",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'}]}},icon:{defaultValue:null,description:"添加图标，在右侧悬浮添加一个图标，用于提示",name:"icon",required:!1,type:{name:"IconProp"}},prepend:{defaultValue:null,description:"添加前缀 用于配置一些固定组合",name:"prepend",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"添加后缀 用于配置一些固定组合",name:"append",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}}}}}catch{}try{autoComplete.displayName="autoComplete",autoComplete.__docgenInfo={description:`> AutoComplete 输入框自动完成功能，需要输入建议/辅助提示。

### 引入方法

\`\`\`js

import { AutoComplete } from 'val-design'

\`\`\``,displayName:"autoComplete",props:{fetchSuggestions:{defaultValue:null,description:"",name:"fetchSuggestions",required:!0,type:{name:"(str: string) => DataSourceType<Record<string, unknown>>[] | Promise<DataSourceType<Record<string, unknown>>[]>"}},onSelect:{defaultValue:null,description:"点击选择项的回调",name:"onSelect",required:!1,type:{name:"((item: DataSourceType<Record<string, unknown>>) => void)"}},renderOptions:{defaultValue:null,description:"自定义模板",name:"renderOptions",required:!1,type:{name:"((item: DataSourceType<Record<string, unknown>>) => ReactElement<any, string | JSXElementConstructor<any>>)"}},disabled:{defaultValue:null,description:"是否禁用 Input",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((e: ChangeEvent<HTMLInputElement>) => void)"}},size:{defaultValue:null,description:"设置 input 大小，支持 lg 或者是 sm",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'}]}},icon:{defaultValue:null,description:"添加图标，在右侧悬浮添加一个图标，用于提示",name:"icon",required:!1,type:{name:"IconProp"}},prepend:{defaultValue:null,description:"添加前缀 用于配置一些固定组合",name:"prepend",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}},append:{defaultValue:null,description:"添加后缀 用于配置一些固定组合",name:"append",required:!1,type:{name:"string | ReactElement<any, string | JSXElementConstructor<any>>"}}}}}catch{}const L=u=>P.get(`https://api.github.com/search/users?q=${u}`).then(t=>t).then(({data:t})=>t.items.slice(0,10).map(o=>({value:o.login,...o}))),ce={title:"Data Entry/Auto Complete 自动完成",component:d},H=u=>r.jsx(d,{...u}),p=H.bind({});p.args={fetchSuggestions:L,onSelect:x("selected")};var V,w,q;p.parameters={...p.parameters,docs:{...(V=p.parameters)==null?void 0:V.docs,source:{originalSource:"props => <AutoComplete {...props} />",...(q=(w=p.parameters)==null?void 0:w.docs)==null?void 0:q.source}}};const pe=["DefaultAutoComplete"];export{p as DefaultAutoComplete,pe as __namedExportsOrder,ce as default};
